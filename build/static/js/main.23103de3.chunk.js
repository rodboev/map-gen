(this["webpackJsonpmap-gen"]=this["webpackJsonpmap-gen"]||[]).push([[0],{40:function(e){e.exports=JSON.parse('[{"name":"Bronx","zips":["10467","10456","10462","10458","10453","10452","10468","10457","10460","10473","10466","10472","10469","10461","10475","10459","10455","10705","10465","10471","10470","10474","10464","10499"]},{"name":"Brooklyn","zips":["11226","11201","11235","11206","11221","11230","11212","11209","11207","11214","11211","11229","11238","11215","11234","11233","11236","11218","11223","11225","11208","11213","11216","11219","11204","11203","11220","11210","11224","11222","11217","11249","11205","11237","11231","11228","11239","11232","11202","11247","11243","11240","11241","11242","11244","11245","11248","11251","11252","11254","11255","11256"]},{"name":"Manhattan","zips":["10025","10023","10002","10016","10029","10009","10011","10128","10019","10003","10463","10024","10028","10027","10021","10032","10031","10451","10014","10036","10033","10010","10022","10065","10001","10040","10034","10026","10013","10035","10075","10012","10454","10038","10030","10017","10039","10037","10018","10005","10044","10280","10069","10007","10282","10006","10004","10116","10163","10150","10162","10008","10276","10101","10159","10108","10113","10185","10272","10156","10274","10129","10268","10102","10103","10104","10105","10106","10107","10043","10109","10110","10111","10112","10015","10114","10115","10045","10117","10118","10119","10120","10121","10122","10123","10124","10125","10126","10046","10047","10130","10131","10132","10133","10138","10149","10048","10151","10152","10153","10154","10155","10055","10157","10158","10060","10160","10161","10020","10072","10164","10165","10166","10167","10168","10169","10170","10171","10172","10173","10174","10175","10176","10177","10178","10179","10184","10079","10196","10197","10199","10203","10211","10212","10213","10242","10249","10256","10257","10258","10259","10260","10261","10265","10080","10269","10270","10271","10081","10273","10082","10275","10087","10277","10278","10279","10090","10281","10094","10285","10286","10292","10095","10096","10098","10099","10041"]},{"name":"Queens","zips":["11375","11377","11355","11385","11373","11101","11372","11368","11354","11374","11434","11691","11106","11432","11435","11102","11103","11365","11367","11357","11105","11364","11358","11104","11379","11413","11420","11414","11412","11361","11378","11421","11433","11419","11360","11418","11415","11001","11423","11369","11694","11422","11427","11417","11692","11370","11356","11429","11362","11411","11426","11428","11693","11004","11416","11436","11366","11109","11697","11363","11096","11005","11352","11431","11386","11690","11430","11380","11424","11371","11439","11351","11451","11499","11381","11425","11359","11120","11390","11695","11405","11437"]},{"name":"Staten Island","zips":["10314","10306","10312","10304","10301","10305","10309","10308","10310","10303","10302","10307","10313","10311"]}]')},45:function(e,t,n){},49:function(e,t,n){},71:function(e,t,n){"use strict";n.r(t);var r,a=n(0),o=n.n(a),c=n(13),i=n.n(c),s=(n(45),n(5)),u=n(77),p=(n(46),n(47),n(48),n(49),n(2)),l=n.n(p),d=n(73),f=n(4),b=n.n(f),j=n(8),h=n(32),O="pk.eyJ1Ijoicm9kYm9ldiIsImEiOiJja3NncXVnMzgxbXVwMnNvbTdwMTNsdzI0In0.6n8Lu9s1o4JwyPJmMcHsNg",m=new h.a({params:{access_token:O}}),v=function(){var e=Object(j.a)(b.a.mark((function e(t){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m.search({query:String(t)});case 3:if(!((n=e.sent).length>0)){e.next=6;break}return e.abrupt("return",[n[0].y,n[0].x]);case 6:e.next=11;break;case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),x=function(e){var t=String(e).replace(/\D/g,"").match(/^(\d{3})(\d{3})(\d{4})$/);return t?"(".concat(t[1],") ").concat(t[2],"-").concat(t[3]):null},g=function(){var e=Object(d.a)();return Object(a.useEffect)((function(){new l.a.TileLayer("https://api.mapbox.com/styles/v1/mapbox/streets-v11/tiles/{z}/{x}/{y}?access_token=".concat(O),{maxZoom:17,minZoom:9,attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, &copy; <a href="https://www.mapbox.com/">Mapbox</a>',id:"mapbox/streets-v11",tileSize:512,zoomOffset:-1}).addTo(e)}),[e]),null},y=n(74),w=n(16),E=n.n(w),k=n(33),z=n.n(k),D=n(10),A=n.n(D),S=n(34),B=E.a.createInstance({driver:[E.a.INDEXEDDB,E.a.LOCALSTORAGE,z.a._driver],name:"map-gen-cache"}),C=Object(S.setupCache)({maxAge:0,store:B}),F=A.a.create({adapter:C.adapter}),L=n(1),T=function(e){e.setLocation,e.setZoom;var t=Object(a.useState)(null),n=Object(s.a)(t,2),r=n[0],o=n[1],c=Object(d.a)();return Object(a.useEffect)((function(){Object(j.a)(b.a.mark((function e(){var t,n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F.get("/data/beta_nyc-zip-code-tabulation-areas-polygons.min.geojson");case 2:return t=e.sent,o(t.data),e.next=6,C.store.length();case 6:n=e.sent,console.log("Cache store length:",n);case 8:case"end":return e.stop()}}),e)})))()}),[]),r&&Object(L.jsx)(y.a,{data:r,onEachFeature:function(e,t){var n="";e.properties&&(n+="".concat(e.properties.PO_NAME,", ").concat(e.properties.STATE," ").concat(e.properties.postalCode).toUpperCase()),t.bindPopup(n),t.on("click",(function(){var t=parseFloat(e.properties.latitude),n=parseFloat(e.properties.longitude);c.setView([t,n],12)}))},style:function(){return{fillColor:"lightblue",weight:2,opacity:1,color:"white",dashArray:"3",fillOpacity:.6}}})},_=n(3),I=n(20),M=n(78),N=n(75),J=n(76),P={ADD_LEAD:function(e,t){return[].concat(Object(I.a)(e),[t.payload])},UPDATE_LEAD:function(e,t){var n=e.findIndex((function(e){return e.id===t.payload.id})),r=Object(_.a)(Object(_.a)({},e[n]),{},{position:t.payload.position}),a=Object(I.a)(e);return a.splice(n,1,r),a},DELETE_LEAD:function(e,t){return e.filter((function(e){return e.id!==t.payload.id}))}},V=function(e,t){return P[t.type]?P[t.type](e,t):e},U=function(e){var t=e.filter,n=Object(a.useReducer)(V,[]),r=Object(s.a)(n,2),o=r[0],c=r[1];Object(a.useEffect)((function(){Object(j.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.a.get("https://lead-gen-lite.herokuapp.com/api/all-with-contacts.json");case 2:e.sent.data.slice(0,50).forEach((function(e){var t=x(e.phone);c({type:"ADD_LEAD",payload:{id:Object(M.a)(),company:e.company,name:[e.first_name,e.last_name].join(" "),address1:e.address,address2:[[e.city,e.state].filter(Boolean).join(", "),e.zip].filter(Boolean).join(" "),phone:t,notes:[e.date,e.notes].filter(Boolean).join(": "),position:[],loading:!1}})}));case 4:case"end":return e.stop()}}),e)})))()}),[]),Object(a.useEffect)((function(){Object(j.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o.filter((function(e){return e.position&&0===e.position.length&&!e.loading})).forEach(function(){var e=Object(j.a)(b.a.mark((function e(t){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=function(){var e=Object(j.a)(b.a.mark((function e(){var n,r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[t.address1,t.address2].join(" "),t.loading=!0,e.next=4,v(n);case 4:return r=e.sent,t.loading=!1,e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e.t0=c,e.t1=t.id,e.next=5,n();case 5:e.t2=e.sent,e.t3={id:e.t1,position:e.t2},e.t4={type:"UPDATE_LEAD",payload:e.t3},(0,e.t0)(e.t4);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}}),e)})))()}),[o]);var i=Object(d.a)();return o.map((function(e){var n,r,a;return(null===(n=e.position)||void 0===n?void 0:n.length)>0&&(0===(null===(r=t.zips)||void 0===r?void 0:r.length)||(null===(a=t.zips)||void 0===a?void 0:a.some((function(t){return e.address2.includes(t)}))))&&Object(L.jsx)(N.a,{position:e.position,eventHandlers:{click:function(){i.setView(e.position,13)}},children:Object(L.jsxs)(J.a,{children:[Object(L.jsx)("div",{children:e.name}),Object(L.jsx)("div",{children:e.company}),Object(L.jsx)("div",{children:e.address1}),Object(L.jsx)("div",{children:e.address2}),Object(L.jsx)("div",{children:e.phone}),Object(L.jsx)("p",{children:e.notes})]})},e.id)}))},X=n(35),Z=n(36).a.button(r||(r=Object(X.a)(["\n  border: 2px solid #3376d2;\n\tborder-radius: 3px;\n\tcursor: pointer;\n\tfont-size: 80%;\n\tpadding: 0 20pt;\n\tbackground: white;\n\tcolor: #3376d2;\n  height: 22pt;\n  margin: 0.25em;\n  &:hover {\n    color: white;\n    background-color: rgba(0, 109, 235, 0.75);\n    border-color: transparent;\n  }\n  &.selected, &.selected:hover {\n    color: white;\n    background-color: rgba(0, 109, 235);\n  }\n"]))),H=function(e){var t=e.children,n=e.boros,r=e.currentBoros,o=e.setCurrentBoros,c=e.filter,i=e.setFilter,u=Object(a.useState)(!1),p=Object(s.a)(u,2),l=p[0],d=p[1];return Object(L.jsx)(Z,{className:l?"selected":"",onClick:function(){var e,a=!l,s=function(e){return n.map((function(t){return e.includes(t.name)&&t.zips})).filter(Boolean).flat()};a?(e=r.concat(n.filter((function(e){return e.name===t}))[0].name),o(e),i(Object(_.a)(Object(_.a)({},c),{},{boros:e,zips:s(e)}))):(e=r.filter((function(e){return e!==t})),o(e),i(Object(_.a)(Object(_.a)({},c),{},{boros:e,zips:s(e)}))),d(a)},children:t})},R=function(e){var t=e.boros,n=e.filter,r=e.setFilter,o=Object(a.useState)([]),c=Object(s.a)(o,2),i=c[0],u=c[1];return Object(L.jsxs)("p",{children:["Filter:"," ",t.map((function(e){return Object(L.jsx)(H,{boros:t,currentBoros:i,setCurrentBoros:u,filter:n,setFilter:r,children:e.name})}))]})},q=n(40);var G=function(){var e=Object(a.useState)({}),t=Object(s.a)(e,2),n=t[0],r=t[1];return Object(L.jsxs)(L.Fragment,{children:[Object(L.jsx)("div",{id:"mapid",children:Object(L.jsxs)(u.a,{center:[40.705,-73.978],zoom:10,zoomControl:!0,children:[Object(L.jsx)(g,{}),Object(L.jsx)(T,{}),Object(L.jsx)(U,{filter:n})]})}),Object(L.jsx)(R,{boros:q,filter:n,setFilter:r})]})},Q=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,79)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,o=t.getLCP,c=t.getTTFB;n(e),r(e),a(e),o(e),c(e)}))};i.a.render(Object(L.jsx)(o.a.StrictMode,{children:Object(L.jsx)(G,{})}),document.getElementById("root")),Q()}},[[71,1,2]]]);
//# sourceMappingURL=main.23103de3.chunk.js.map