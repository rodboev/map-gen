(this["webpackJsonpmap-gen"]=this["webpackJsonpmap-gen"]||[]).push([[0],{44:function(t,e,n){},48:function(t,e,n){},70:function(t,e,n){"use strict";n.r(e);var r,a=n(0),c=n.n(a),o=n(13),i=n.n(o),s=(n(44),n(76)),u=(n(45),n(46),n(47),n(48),n(2)),p=n.n(u),d=n(72),l=n(3),f=n.n(l),j=n(8),b=n(32),h="pk.eyJ1Ijoicm9kYm9ldiIsImEiOiJja3NncXVnMzgxbXVwMnNvbTdwMTNsdzI0In0.6n8Lu9s1o4JwyPJmMcHsNg",O=new b.a({params:{access_token:h}}),m=function(){var t=Object(j.a)(f.a.mark((function t(e){var n;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,O.search({query:String(e)});case 3:if(!((n=t.sent).length>0)){t.next=6;break}return t.abrupt("return",[n[0].y,n[0].x]);case 6:t.next=11;break;case 8:return t.prev=8,t.t0=t.catch(0),t.abrupt("return",t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}(),x=function(t){var e=String(t).replace(/\D/g,"").match(/^(\d{3})(\d{3})(\d{4})$/);return e?"(".concat(e[1],") ").concat(e[2],"-").concat(e[3]):null},g=function(){var t=Object(d.a)();return Object(a.useEffect)((function(){new p.a.TileLayer("https://api.mapbox.com/styles/v1/mapbox/streets-v11/tiles/{z}/{x}/{y}?access_token=".concat(h),{maxZoom:17,minZoom:9,attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, &copy; <a href="https://www.mapbox.com/">Mapbox</a>',id:"mapbox/streets-v11",tileSize:512,zoomOffset:-1}).addTo(t)}),[t]),null},v=n(7),y=n(73),w=n(16),E=n.n(w),k=n(33),D=n.n(k),A=n(10),L=n.n(A),T=n(34),_=E.a.createInstance({driver:[E.a.INDEXEDDB,E.a.LOCALSTORAGE,D.a._driver],name:"map-gen-cache"}),z=Object(T.setupCache)({maxAge:0,store:_}),C=L.a.create({adapter:z.adapter}),I=n(1),F=function(t){t.setLocation,t.setZoom;var e=Object(a.useState)(null),n=Object(v.a)(e,2),r=n[0],c=n[1],o=Object(d.a)();return Object(a.useEffect)((function(){Object(j.a)(f.a.mark((function t(){var e,n;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,C.get("/data/beta_nyc-zip-code-tabulation-areas-polygons.min.geojson");case 2:return e=t.sent,c(e.data),t.next=6,z.store.length();case 6:n=t.sent,console.log("Cache store length:",n);case 8:case"end":return t.stop()}}),t)})))()}),[]),r&&Object(I.jsx)(y.a,{data:r,onEachFeature:function(t,e){var n="";t.properties&&(n+="".concat(t.properties.PO_NAME,", ").concat(t.properties.STATE," ").concat(t.properties.postalCode).toUpperCase()),e.bindPopup(n),e.on("click",(function(){var e=parseFloat(t.properties.latitude),n=parseFloat(t.properties.longitude);o.setView([e,n],12)}))},style:function(){return{fillColor:"lightblue",weight:2,opacity:1,color:"white",dashArray:"3",fillOpacity:.6}}})},S=n(6),M=n(20),P=n(77),B=n(74),J=n(75),N={ADD_LEAD:function(t,e){return[].concat(Object(M.a)(t),[e.payload])},UPDATE_LEAD:function(t,e){var n=t.findIndex((function(t){return t.id===e.payload.id})),r=Object(S.a)(Object(S.a)({},t[n]),{},{position:e.payload.position}),a=Object(M.a)(t);return a.splice(n,1,r),a},DELETE_LEAD:function(t,e){return t.filter((function(t){return t.id!==e.payload.id}))}},V=function(t,e){return N[e.type]?N[e.type](t,e):t},U=function(){var t=Object(a.useReducer)(V,[]),e=Object(v.a)(t,2),n=e[0],r=e[1];Object(a.useEffect)((function(){Object(j.a)(f.a.mark((function t(){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,L.a.get("https://lead-gen-lite.herokuapp.com/api/all-with-contacts.json");case 2:t.sent.data.slice(0,50).forEach((function(t){var e=x(t.phone);r({type:"ADD_LEAD",payload:{id:Object(P.a)(),company:t.company,name:[t.first_name,t.last_name].join(" "),address1:t.address,address2:[[t.city,t.state].filter(Boolean).join(", "),t.zip].filter(Boolean).join(" "),phone:e,notes:[t.date,t.notes].filter(Boolean).join(": "),position:[],loading:!1}})}));case 4:case"end":return t.stop()}}),t)})))()}),[]),Object(a.useEffect)((function(){Object(j.a)(f.a.mark((function t(){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n.filter((function(t){return t.position&&0===t.position.length&&!t.loading})).forEach(function(){var t=Object(j.a)(f.a.mark((function t(e){var n;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=function(){var t=Object(j.a)(f.a.mark((function t(){var n,r;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=[e.address1,e.address2].join(" "),e.loading=!0,t.next=4,m(n);case 4:return r=t.sent,e.loading=!1,t.abrupt("return",r);case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),t.t0=r,t.t1=e.id,t.next=5,n();case 5:t.t2=t.sent,t.t3={id:t.t1,position:t.t2},t.t4={type:"UPDATE_LEAD",payload:t.t3},(0,t.t0)(t.t4);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 2:case"end":return t.stop()}}),t)})))()}),[n]);var c=Object(d.a)();return n.map((function(t){return t.position&&t.position.length>0&&Object(I.jsx)(B.a,{position:t.position,eventHandlers:{click:function(){c.setView(t.position,13)}},children:Object(I.jsxs)(J.a,{children:[Object(I.jsx)("div",{children:t.name}),Object(I.jsx)("div",{children:t.company}),Object(I.jsx)("div",{children:t.address1}),Object(I.jsx)("div",{children:t.address2}),Object(I.jsx)("div",{children:t.phone}),Object(I.jsx)("p",{children:t.notes})]})},t.id)}))},X=n(35),Z=n(36),G=[11104,11209,11214,10019,10013,10003],H=Z.a.button(r||(r=Object(X.a)(["\n  border: 2px solid #3376d2;\n\tborder-radius: 3px;\n\tcursor: pointer;\n\tfont-size: 80%;\n\tpadding: 0 20pt;\n\tbackground: white;\n\tcolor: #3376d2;\n  height: 22pt;\n  margin: 0.25em;\n  &:hover {\n    background-color: #006deb;\n    color: white;\n  }\n"]))),R=function(){return Object(I.jsx)(I.Fragment,{children:Object(I.jsxs)("p",{children:["Get results from:",Object(I.jsx)("br",{})," ",G.map((function(t){return Object(I.jsx)(H,{children:t})}))]})})};var q=function(){return Object(I.jsx)(I.Fragment,{children:Object(I.jsxs)("div",{id:"mapid",children:[Object(I.jsxs)(s.a,{center:[40.705,-73.978],zoom:10,zoomControl:!0,children:[Object(I.jsx)(g,{}),Object(I.jsx)(F,{}),Object(I.jsx)(U,{})]}),Object(I.jsx)(R,{})]})})},Y=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,78)).then((function(e){var n=e.getCLS,r=e.getFID,a=e.getFCP,c=e.getLCP,o=e.getTTFB;n(t),r(t),a(t),c(t),o(t)}))};i.a.render(Object(I.jsx)(c.a.StrictMode,{children:Object(I.jsx)(q,{})}),document.getElementById("root")),Y()}},[[70,1,2]]]);
//# sourceMappingURL=main.3e717416.chunk.js.map