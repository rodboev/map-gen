(this["webpackJsonpmap-gen"]=this["webpackJsonpmap-gen"]||[]).push([[0],{35:function(t,e,n){},39:function(t,e,n){},61:function(t,e,n){"use strict";n.r(e);var a=n(0),r=n.n(a),c=n(13),o=n.n(c),i=(n(35),n(67)),s=(n(36),n(37),n(38),n(39),n(1)),u=n.n(s),p=n(63),d=n(3),l=n.n(d),f=n(8),j=n(28),b="pk.eyJ1Ijoicm9kYm9ldiIsImEiOiJja3NncXVnMzgxbXVwMnNvbTdwMTNsdzI0In0.6n8Lu9s1o4JwyPJmMcHsNg",h=new j.a({params:{access_token:b}}),O=function(){var t=Object(f.a)(l.a.mark((function t(e){var n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,h.search({query:String(e)});case 3:if(!((n=t.sent).length>0)){t.next=6;break}return t.abrupt("return",[n[0].y,n[0].x]);case 6:t.next=11;break;case 8:return t.prev=8,t.t0=t.catch(0),t.abrupt("return",t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}(),m=function(t){var e=String(t).replace(/\D/g,"").match(/^(\d{3})(\d{3})(\d{4})$/);return e?"(".concat(e[1],") ").concat(e[2],"-").concat(e[3]):null},x=function(){var t=Object(p.a)();return Object(a.useEffect)((function(){new u.a.TileLayer("https://api.mapbox.com/styles/v1/mapbox/streets-v11/tiles/{z}/{x}/{y}?access_token=".concat(b),{maxZoom:17,minZoom:9,attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, &copy; <a href="https://www.mapbox.com/">Mapbox</a>',id:"mapbox/streets-v11",tileSize:512,zoomOffset:-1}).addTo(t)}),[t]),null},v=n(7),g=n(64),y=n(15),w=n.n(y),E=n(29),k=n.n(E),D=n(10),A=n.n(D),L=n(30),T=w.a.createInstance({driver:[w.a.INDEXEDDB,w.a.LOCALSTORAGE,k.a._driver],name:"map-gen-cache"}),_=Object(L.setupCache)({maxAge:0,store:T}),C=A.a.create({adapter:_.adapter}),I=n(2),z=function(t){t.setLocation,t.setZoom;var e=Object(a.useState)(null),n=Object(v.a)(e,2),r=n[0],c=n[1],o=Object(p.a)();return Object(a.useEffect)((function(){Object(f.a)(l.a.mark((function t(){var e,n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,C.get("/data/beta_nyc-zip-code-tabulation-areas-polygons.min.geojson");case 2:return e=t.sent,c(e.data),t.next=6,_.store.length();case 6:n=t.sent,console.log("Cache store length:",n);case 8:case"end":return t.stop()}}),t)})))()}),[]),r&&Object(I.jsx)(g.a,{data:r,onEachFeature:function(t,e){var n="";t.properties&&(n+="".concat(t.properties.PO_NAME,", ").concat(t.properties.STATE," ").concat(t.properties.postalCode).toUpperCase()),e.bindPopup(n),e.on("click",(function(){var e=parseFloat(t.properties.latitude),n=parseFloat(t.properties.longitude);o.setView([e,n],12)}))},style:function(){return{fillColor:"lightblue",weight:2,opacity:1,color:"white",dashArray:"3",fillOpacity:.6}}})},S=n(6),F=n(18),M=n(68),P=n(65),B=n(66),J={ADD_LEAD:function(t,e){return[].concat(Object(F.a)(t),[e.payload])},UPDATE_LEAD:function(t,e){var n=t.findIndex((function(t){return t.id===e.payload.id})),a=Object(S.a)(Object(S.a)({},t[n]),{},{position:e.payload.position}),r=Object(F.a)(t);return r.splice(n,1,a),r},DELETE_LEAD:function(t,e){return t.filter((function(t){return t.id!==e.payload.id}))}},N=function(t,e){return J[e.type]?J[e.type](t,e):t},V=function(){var t=Object(a.useReducer)(N,[]),e=Object(v.a)(t,2),n=e[0],r=e[1];Object(a.useEffect)((function(){Object(f.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,A.a.get("https://lead-gen-lite.herokuapp.com/api/all-with-contacts.json");case 2:t.sent.data.slice(0,50).forEach((function(t){var e=m(t.phone);r({type:"ADD_LEAD",payload:{id:Object(M.a)(),company:t.company,name:[t.first_name,t.last_name].join(" "),address1:t.address,address2:[[t.city,t.state].filter(Boolean).join(", "),t.zip].filter(Boolean).join(" "),phone:e,notes:[t.date,t.notes].filter(Boolean).join(": "),position:[],loading:!1}})}));case 4:case"end":return t.stop()}}),t)})))()}),[]),Object(a.useEffect)((function(){Object(f.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n.filter((function(t){return t.position&&0===t.position.length&&!t.loading})).forEach(function(){var t=Object(f.a)(l.a.mark((function t(e){var n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=function(){var t=Object(f.a)(l.a.mark((function t(){var n,a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=[e.address1,e.address2].join(" "),e.loading=!0,t.next=4,O(n);case 4:return a=t.sent,e.loading=!1,t.abrupt("return",a);case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),t.t0=r,t.t1=e.id,t.next=5,n();case 5:t.t2=t.sent,t.t3={id:t.t1,position:t.t2},t.t4={type:"UPDATE_LEAD",payload:t.t3},(0,t.t0)(t.t4);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 2:case"end":return t.stop()}}),t)})))()}),[n]);var c=Object(p.a)();return n.map((function(t){return t.position&&t.position.length>0&&Object(I.jsx)(P.a,{position:t.position,eventHandlers:{click:function(){c.setView(t.position,13)}},children:Object(I.jsxs)(B.a,{children:[Object(I.jsx)("div",{children:t.name}),Object(I.jsx)("div",{children:t.company}),Object(I.jsx)("div",{children:t.address1}),Object(I.jsx)("div",{children:t.address2}),Object(I.jsx)("div",{children:t.phone}),Object(I.jsx)("p",{children:t.notes})]})},t.id)}))};var U=function(){return Object(I.jsx)(I.Fragment,{children:Object(I.jsx)("div",{id:"mapid",children:Object(I.jsxs)(i.a,{center:[40.705,-73.978],zoom:10,zoomControl:!0,children:[Object(I.jsx)(x,{}),Object(I.jsx)(z,{}),Object(I.jsx)(V,{})]})})})},X=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,69)).then((function(e){var n=e.getCLS,a=e.getFID,r=e.getFCP,c=e.getLCP,o=e.getTTFB;n(t),a(t),r(t),c(t),o(t)}))};o.a.render(Object(I.jsx)(r.a.StrictMode,{children:Object(I.jsx)(U,{})}),document.getElementById("root")),X()}},[[61,1,2]]]);
//# sourceMappingURL=main.74e6e17c.chunk.js.map